import { Meta } from '@storybook/blocks';

<Meta title="Introduction" />

<style>
  {`
  .intro-hero {
    background: hsl(var(--background));
    padding: 0.5rem;
    margin-bottom: 1rem;
    text-align: center;
  }

  .feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
  }

  .feature-card {
    border: 1px solid hsl(var(--border));
    border-radius: 0.5rem;
    padding: 1.5rem;
    background: hsl(var(--card));
    transition: all 0.2s ease;
  }

  .feature-card:hover {
    border-color: hsl(var(--border));
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  }

  .component-showcase {
    background: hsl(var(--muted));
    padding: 1.5rem;
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    border: 1px solid hsl(var(--border));
  }

  .status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.75rem;
    font-weight: 500;
    border: 1px solid transparent;
  }

  .status-testing {
    background: hsl(var(--warning) / 0.1);
    color: hsl(var(--warning-foreground));
    border-color: hsl(var(--warning) / 0.2);
  }

  .status-development {
    background: hsl(var(--primary) / 0.1);
    color: hsl(var(--primary-foreground));
    border-color: hsl(var(--primary) / 0.2);
  }

  .status-coming-soon {
    background: hsl(var(--muted));
    color: hsl(var(--muted-foreground));
    border-color: hsl(var(--border));
  }

  .status-production {
    background: hsl(var(--success) / 0.1);
    color: hsl(var(--success-foreground));
    border-color: hsl(var(--success) / 0.2);
  }
`}
</style>

<div className="intro-hero">
  <h1>üöÄ Embedded Finance UI Components</h1>
  <p
    style={{
      fontSize: '1.125rem',
      margin: '1rem 0',
      color: 'hsl(var(--muted-foreground))',
    }}
  >
    A comprehensive React component library for seamless integration of embedded
    finance capabilities into your web applications
  </p>
</div>

## What is Embedded Finance?

Embedded finance refers to the integration of financial services and products directly into non-financial applications, platforms, and user experiences. This library provides pre-built, customizable UI components that enable seamless integration of complex financial workflows without requiring deep financial expertise.

## Architecture Overview

The library is built on several key architectural principles:

### OpenAPI Specification (OAS) Driven

- TypeScript types and React Query hooks generated from OAS specifications
- Ensures type safety and consistency between API and UI
- Future support for Arazzo workflow definitions

### Opinionated UX Layer

- Enhanced client-side validations
- Smart payload formation
- Error mapping and recovery
- Cognitive load reduction and intelligent navigation

### Flexible Integration

- Runtime customization through theme and content tokens
- Parent app monitoring integration
- Configurable API endpoints and authentication

## Available Components

<div className="feature-grid">

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üè¶ Client Onboarding (KYC/KYB)</h3>
  <p>
    Complete client verification with incremental information collection, due
    diligence questions, and document requests for seamless onboarding.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-testing">Testing</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>Create client with basic business information</li>
    <li>Collect party details and due diligence responses</li>
    <li>Handle document requests and attestations</li>
    <li>Submit for verification and monitor status</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üîó Link External Bank Account</h3>
  <p>
    Connect external bank accounts using Account Validation Service with
    microdeposits verification for secure account linking.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-testing">Testing</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>Add recipient with account details and party information</li>
    <li>Trigger Account Validation Service (AVS) checks</li>
    <li>Complete microdeposits verification if required</li>
    <li>Activate linked account for payments</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üë• Recipients Management</h3>
  <p>
    Add, view, edit, and manage third-party payment recipients with dynamic
    validation, multi-method support (ACH, WIRE, RTP), and secure, accessible
    workflows.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-development">In Progress</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>View, search, filter, and sort all saved recipients</li>
    <li>
      Add new recipients with dynamic forms based on selected payment methods
    </li>
    <li>Edit recipient details and update payment methods</li>
    <li>Deactivate recipients with confirmation and audit tracking</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üí∞ Make Payouts</h3>
  <p>
    Initiate ACH, Wire, and RTP payments from Embedded Banking accounts to
    external recipients and linked accounts.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-development">In Progress</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>Get debtor account ID from your Embedded account</li>
    <li>Create payment request with recipient and amount</li>
    <li>Submit transaction with reference ID and memo</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üìä Transaction History & Management</h3>
  <p>
    View, filter, and manage transaction records with detailed insights and
    comprehensive reporting capabilities for better financial oversight.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-coming-soon">Coming Soon</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>Fetch transaction data with filtering options</li>
    <li>Display transaction details and status</li>
    <li>Provide search and sorting capabilities</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üè¶ Accounts Management</h3>
  <p>
    View Embedded Finance accounts with detailed insights and balances for
    better financial oversight.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-coming-soon">Coming Soon</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>View accounts details and balances</li>
    <li>Mask sensitive account information for security</li>
    <li>Accessible, mobile-responsive design with tooltips and help text</li>
  </ul>
</div>

</div>

## Utility Components

<div className="feature-grid">

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üìÖ Important Date Selector</h3>
  <p>
    Interactive date picker with validation and formatting options for birth
    dates and other important dates.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-production">Available</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>Month, day, year input fields</li>
    <li>Validation and formatting</li>
    <li>Accessible design</li>
    <li>Mobile-friendly interface</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üè≠ Industry Classification</h3>
  <p>
    Hierarchical selector for industry categories and subcategories with search
    functionality.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-production">Available</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>NAICS code integration</li>
    <li>Search and filter capabilities</li>
    <li>Hierarchical category display</li>
    <li>Industry sector organization</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üìÑ Tax ID Selector</h3>
  <p>
    Configurable input for different tax ID formats with validation (EIN, SSN,
    ITIN).
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-coming-soon">Coming Soon</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>Multiple tax ID format support</li>
    <li>Format validation and masking</li>
    <li>Dynamic input based on selection</li>
    <li>Error handling and user feedback</li>
  </ul>
</div>

<div className="feature-card">
  <h3 style={{ marginTop: 0 }}>üìç Address Validation</h3>
  <p>
    Smart address input with autocomplete and validation capabilities for
    accurate address collection.
  </p>
  <div style={{ marginTop: '1rem' }}>
    <span className="status-badge status-coming-soon">Coming Soon</span>
  </div>
  <ul style={{ margin: '1rem 0', paddingLeft: '1.5rem' }}>
    <li>Address autocomplete</li>
    <li>Validation and formatting</li>
    <li>Multi-field address input</li>
    <li>Integration with address services</li>
  </ul>
</div>

</div>

## Theming & Customization

The library supports comprehensive theming through the `EBComponentsProvider`. Customize colors, typography, spacing, and component behavior to match your application's design system.

### Key Theme Features

- **Design Token System**: 100+ customizable design tokens
- **Light/Dark Mode**: Built-in support for both themes
- **Tailwind Integration**: Uses `eb-` prefixed classes
- **Runtime Customization**: Inject design tokens at runtime
- **CSS Variables**: All tokens converted to CSS variables

### Quick Theme Example

```tsx
<EBComponentsProvider
  apiBaseUrl="https://api.example.com"
  theme={{
    colorScheme: 'light',
    variables: {
      fontFamily: 'Inter, system-ui, sans-serif',
      primaryColor: '#2563eb',
      borderRadius: '0.5rem',
      buttonFontWeight: '600',
    },
  }}
>
  {/* Your components */}
</EBComponentsProvider>
```

## Quick Start

<div className="component-showcase">

### Installation

```bash
npm install @jpmorgan-payments/embedded-finance-components
# or
yarn add @jpmorgan-payments/embedded-finance-components
```

### Basic Usage

```tsx
import {
  EBComponentsProvider,
  OnboardingWizardBasic,
} from '@jpmorgan-payments/embedded-finance-components';

function App() {
  return (
    <EBComponentsProvider apiBaseUrl="https://your-api-base-url.com">
      <OnboardingWizardBasic
        availableProducts={['EMBEDDED_PAYMENTS']}
        availableJurisdictions={['US']}
        onPostClientSettled={(response, error) => {
          console.log('Client created:', response);
        }}
      />
    </EBComponentsProvider>
  );
}
```

### With Custom Theme

```tsx
const customTheme = {
  colorScheme: 'light',
  variables: {
    fontFamily: 'Inter, system-ui, sans-serif',
    primaryColor: '#2563eb',
    borderRadius: '0.5rem',
  },
};

<EBComponentsProvider apiBaseUrl="https://api.example.com" theme={customTheme}>
  {/* Your components */}
</EBComponentsProvider>;
```

</div>

## Development & Testing

### Technology Stack

- **React 18** with TypeScript
- **Radix UI** primitives for accessibility
- **Tailwind CSS** for styling (with `eb-` prefixes)
- **Vite** & TypeScript for build tooling
- **Storybook 8.x** for component development
- **MSW** for API mocking in development
- **TanStack React Query v5** for data fetching
- **Zod** for validation
- **Vitest** for testing

### Development Scripts

```bash
# Start development server
yarn dev

# Start Storybook
yarn storybook

# Run tests
yarn test

# Type checking
yarn typecheck

# Linting
yarn lint
```

## Integration Scenarios

The components are designed for flexible integration into parent web applications with several customization points:

1. **Runtime Customization**: Inject design tokens and content tokens from parent apps
2. **Monitoring Integration**: Connect to parent app's monitoring systems
3. **Theme Consistency**: Match parent app's design system
4. **Content Management**: Override content through CMS integration
5. **Authentication**: Configurable API endpoints and headers

## Documentation

### Key Resources

- **API Documentation**: [Embedded Payments API](https://developer.payments.jpmorgan.com/docs/embedded-finance-solutions/embedded-payments/)
- **Add Linked Account**: [API Documentation](https://developer.payments.jpmorgan.com/docs/embedded-finance-solutions/embedded-payments/capabilities/embedded-payments/how-to/add-linked-account)
- **OpenAPI Specifications**: Located in `/api-specs/` directory
- **Component Requirements**: Each component has detailed requirements documentation

## Contributing

We welcome contributions! Please see our [Contributing Guide](https://github.com/your-org/embedded-banking/blob/main/embedded-components/CONTRIBUTING.md) for details.

### Development Guidelines

1. Follow the component creation workflow in the contributing guide
2. All components must be wrapped in `EBComponentsProvider`
3. Use TypeScript with strict mode
4. Implement proper error boundaries
5. Follow React 18 best practices
6. Use Tailwind CSS with `eb-` prefix for custom classes
7. Include comprehensive Storybook stories
8. Write tests using MSW for API mocking
9. Ensure accessibility compliance (WCAG 2.1)
